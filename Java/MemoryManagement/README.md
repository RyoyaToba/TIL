## MemoryManagement

https://www.geeksforgeeks.org/java-memory-management/

の記事を自分なりに咀嚼して、Javaにおけるメモリリークに関して知識を深めていきます。

この記事では、ガベージコレクションとかもろもろの話をしていきます。

## なんでJavaのメモリマネジメントについて学ぶの？

Javaにはガベージコレクションがあって、プログラマーが意識せずとも不必要なメモリを解放してくれるので、なんで勉強するんだい？

結局、ガベージコレクションがカバーしてくれない部分もあるし、JVMがどんなことをしているのかを知っていた方が、デバックとかもしやすいよね！

## 序章

どんな言語でもメモリ管理ってめっちゃ重要で、JavaだとJVMいわゆるガベージコレクターが自動管理してくれる。

C言語とかはそういうのないから大変なんだよ〜。

ここでは

Javaのメモリ管理における重要なコンテンツについて勉強していくよ。

* JVMのメモリ構造について
* ガベージコレクタの働きについて

## Javaのメモリ構造について

JVMはプログラムの実行中に使用されるさまざまな実行値データ領域を定義して、作成するんだけど、一部はプログラムで使用されるスレッドが作成するんだ。

JVMが作成したメモリ領域は、JVMが消失するときに同時に破棄されるよ。スレッドのデータ領域はインスタンス化するときに作成されて、スレッドの消失とともに破棄されるよ。

![Memory](https://user-images.githubusercontent.com/105257856/204286431-1c33d8ab-a5e0-435c-9c0a-e5163d8c65f6.png)

https://www.geeksforgeeks.org/java-memory-management/

ではもう少し詳しくみていこう！

## ヒープ領域

* 共有ランタイムデータ領域で、実際のオブジェクトをメモリに格納するの。仮想マシンの起動時にインスタンス化されるよ
* このメモリは全てのクラスインスタンスと配列に割り当てられるよ。ヒープはシステムの構成に応じて、静的サイズだったり動的サイズだったりするよ。
* JVMがヒープのサイズをコントロールしてくれるの。`new`を使ってオブジェクトにヒープ領域が割り当てられて、その参照はスタック領域にあるよ。
* 実行中のJVMには１つのヒープ領域が存在するよ。

```Java
Scanner sc = new Scanner(System.in);
```

上記のコードでは、参照「sc」がスタック領域にプッシュされて、ヒープ領域にScannerクラスのインスタンスが割り当てられるよ。

ヒープ領域のガベージコレクションは必須だよ。

## メソッド領域

* ヒープ領域のロジカル的な部分で、仮想マシンの立ち上がりの時に作成されるよ
* クラス構造体、メソッドデータ、コンストラクタ、フィールドデータ、およびクラスで使用されるインターフェイスとか特別なクラスに割り当てられるよ。ヒープはシステムの構成に応じて、静的サイズだったり動的サイズだったりするよ。
* 固定にもできるし、拡張することもできるよ。連続している必要はないよ。

メソッド領域は論理的にはヒープの一部なんだけど、ヒープ領域でガベージコレクションが強制されてても、ガベージコレクションされる場合とされない場合があるよ〜。

## JVM Stack

* スレッドの生成と同時に作成されるよ。メソッドの値を返して、動的リンクを実行するときに必要なデータと部分的な結果を格納するために用いるよ。
* スタックは、固定サイズまたは動的サイズのいずれかで、スタックのサイズは、作成時に個別に選択できるよ。
* スタックのメモリは連続してなくてもいいよ。

## Native method Stacks

Cスタックとも呼ばれるネイティブメソッドスタックは、Java言語で記述されてないよ。
このメモリは、スレッドの作成時に各スレッドに割り当てられて、固定的または動的な性質を持つことができるよ。

## 



